(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[700],{2914:function(e,s,r){Promise.resolve().then(r.bind(r,576))},576:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return u}});var t=r(7437),n=r(2265),a=r(4033),i=r(1812),l=r.n(i),c=r(1396),o=r.n(c),d=r(5591);function u(e){let{params:s}=e,r=(0,a.useRouter)(),i=(0,a.useSearchParams)(),c=parseInt(s.examNumber),u="practice"===i.get("mode"),[m,x]=(0,n.useState)([]),[h,g]=(0,n.useState)(0),[b,f]=(0,n.useState)({}),[p,v]=(0,n.useState)({}),[w,N]=(0,n.useState)(new Set),[j,y]=(0,n.useState)(!1),[C,k]=(0,n.useState)(2700),[S,E]=(0,n.useState)(!0),[q,M]=(0,n.useState)(null);(0,n.useEffect)(()=>{(async()=>{try{let[e,s]=await Promise.all([fetch((0,d.V)("questions.csv")),fetch((0,d.V)("answers.csv"))]);if(!e.ok||!s.ok)throw Error("Failed to load exam data");let r=await e.text(),t=await s.text(),n=l().parse(r,{header:!0,skipEmptyLines:!0}).data,a=l().parse(t,{header:!0,skipEmptyLines:!0}).data,i=n.filter(e=>{var s;return parseInt((null===(s=e.examNumber)||void 0===s?void 0:s.toString())||"0")===c});if(console.log("Looking for exam ".concat(c)),console.log("Found ".concat(i.length," questions for exam ").concat(c)),console.log("Sample questions data:",n.slice(0,3).map(e=>({examNumber:e.examNumber,type:typeof e.examNumber}))),0===i.length){let e=Array.from(new Set(n.map(e=>{var s;return parseInt((null===(s=e.examNumber)||void 0===s?void 0:s.toString())||"0")}))).filter(e=>e>0).sort();throw Error("No questions found for Exam ".concat(c,". Available exams: ").concat(e.join(", ")))}let o=new Map;i.forEach(e=>{let s="".concat(e.examNumber,"-").concat(e.questionNumber);o.set(s,{...e,answers:[],isMultipleChoice:!1})}),a.forEach(e=>{let s="".concat(e.examNumber,"-").concat(e.questionNumber),r=o.get(s);r&&r.answers.push(e)}),o.forEach(e=>{let s=e.answers.filter(e=>"yes"===e.isCorrect);e.isMultipleChoice=s.length>1});let u=Array.from(o.values()).sort((e,s)=>e.questionNumber-s.questionNumber);u.forEach(e=>{e.answers.sort(()=>Math.random()-.5)}),x(u),E(!1)}catch(e){M(e instanceof Error?e.message:"Failed to load exam data"),E(!1)}})()},[c]),(0,n.useEffect)(()=>{if(!u&&C>0){let e=setTimeout(()=>k(C-1),1e3);return()=>clearTimeout(e)}},[C,u]);let R=e=>{j||(m[h].isMultipleChoice?f(s=>{let r=s[h]||[];return r.includes(e)?{...s,[h]:r.filter(s=>s!==e)}:{...s,[h]:[...r,e]}}):f(s=>({...s,[h]:[e]})))},L=e=>{g(e),y(!1)},A=e=>{if(e===h)return"current";let s=p[e];return"correct"===s?"correct":"incorrect"===s?"incorrect":w.has(e)?"review":b[e]&&b[e].length>0?"answered":"unanswered"},z=()=>{let e=m.map((e,s)=>{let r=b[s]||[],t=e.answers.filter(e=>"yes"===e.isCorrect),n=t.map(e=>e.answerNumber),a=r.length>0||"correct"===p[s]||"incorrect"===p[s];if(u&&!a)return null;let i=r.length===n.length&&r.every(e=>n.includes(e))&&n.every(e=>r.includes(e)),l=r.map(s=>{var r;return(null===(r=e.answers.find(e=>e.answerNumber===s))||void 0===r?void 0:r.answer)||""}).filter(e=>e),c=t.map(e=>e.answer);return{questionIndex:s,examNumber:e.examNumber,questionNumber:e.questionNumber,question:e.question,reference:e.reference,selectedAnswers:r,correctAnswers:n,isCorrect:i,userAnswerTexts:l,correctAnswerTexts:c}}).filter(e=>null!==e),s=Date.now().toString();sessionStorage.setItem("individual-results-".concat(s),JSON.stringify(e));let t=u?"practice":"test";r.push("/results?id=".concat(s,"&mode=individual&examNumber=").concat(c,"&originalMode=").concat(t))};if(S)return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600 mx-auto mb-4"}),(0,t.jsxs)("p",{className:"text-xl text-gray-600",children:["Loading Exam ",c,"..."]})]})});if(q)return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("p",{className:"text-xl text-red-600 mb-4",children:["Error: ",q]}),(0,t.jsx)(o(),{href:"/individual",className:"bg-primary-600 text-white px-6 py-3 rounded-lg hover:bg-primary-700",children:"Back to Exam Selection"})]})});let B=m[h],D=j?(()=>{let e=m[h],s=b[h]||[],r=e.answers.filter(e=>"yes"===e.isCorrect),t=r.map(e=>e.answerNumber);return{isCorrect:s.length===t.length&&s.every(e=>t.includes(e))&&t.every(e=>s.includes(e)),correctAnswers:r,selectedAnswerNumbers:s}})():null,I=b[h]||[],P=w.has(h),T=!j&&"correct"!==p[h]&&"incorrect"!==p[h],_=h===m.length-1,F=u?m.filter((e,s)=>"correct"===p[s]||"incorrect"===p[s]||b[s]&&b[s].length>0).length>0:m.every((e,s)=>"correct"===p[s]||"incorrect"===p[s]||b[s]&&b[s].length>0);return(0,t.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,t.jsxs)("div",{className:"container mx-auto px-4 py-6",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-2xl font-bold text-gray-900",children:["Exam ",c," ",u?"- Practice Mode":"- Test Mode"]}),(0,t.jsx)(o(),{href:"/individual",className:"text-primary-600 hover:text-primary-700 text-sm",children:"← Back to Exam Selection"})]}),(0,t.jsx)("div",{className:"text-right",children:u?(0,t.jsxs)("div",{className:"text-lg font-medium text-gray-600",children:[m.filter((e,s)=>"correct"===p[s]||"incorrect"===p[s]||b[s]&&b[s].length>0).length," of ",m.length," answered"]}):(0,t.jsxs)("div",{className:"timer",children:["Time limit: ","".concat(Math.floor(C/60),":").concat((C%60).toString().padStart(2,"0"))]})})]}),(0,t.jsx)("div",{className:"question-grid mb-4",children:m.map((e,s)=>(0,t.jsx)("button",{onClick:()=>L(s),className:"question-button ".concat(A(s)),children:s+1},s))}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-4 h-4 bg-success-500 rounded"}),(0,t.jsx)("span",{children:"Correct"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-4 h-4 bg-warning-500 rounded"}),(0,t.jsx)("span",{children:"Review"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-4 h-4 bg-danger-500 rounded"}),(0,t.jsx)("span",{children:"Incorrect"})]})]}),F&&(0,t.jsx)("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 text-blue-800",children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),(0,t.jsx)("span",{className:"font-medium",children:u?"You can finish practice anytime to see results.":"All questions answered! You can now finish the exam."})]})})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,t.jsxs)("div",{className:"progress-indicator",children:["Question ",h+1," of ",m.length,P&&(0,t.jsx)("span",{className:"ml-2 px-2 py-1 bg-warning-100 text-warning-800 text-sm rounded",children:"\uD83D\uDCCB Marked for Review"})]}),(0,t.jsx)("button",{className:"bg-primary-600 text-white p-3 rounded-full hover:bg-primary-700",children:(0,t.jsxs)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:[(0,t.jsx)("path",{fillRule:"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.617.776l-4.5-3.5a1 1 0 010-1.552l4.5-3.5z",clipRule:"evenodd"}),(0,t.jsx)("path",{fillRule:"evenodd",d:"M14.383 3.076A1 1 0 0115 4v12a1 1 0 01-1.617.776l-4.5-3.5a1 1 0 010-1.552l4.5-3.5z",clipRule:"evenodd"})]})})]}),(0,t.jsx)("h2",{className:"text-xl font-medium text-gray-900 mb-2",children:null==B?void 0:B.question}),(null==B?void 0:B.isMultipleChoice)&&(0,t.jsx)("p",{className:"text-sm text-blue-600 font-medium mb-4",children:"\uD83D\uDCCB Select TWO answers for this question"}),(0,t.jsx)("div",{className:"space-y-3 mb-8",children:null==B?void 0:B.answers.map(e=>{let s=I.includes(e.answerNumber),r="yes"===e.isCorrect,n="answer-option";return j?r?n+=" border-success-500 bg-success-50":s&&(n+=" border-danger-500 bg-danger-50"):s&&(n+=" selected"),(0,t.jsx)("button",{onClick:()=>R(e.answerNumber),className:n,disabled:j,children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-5 h-5 rounded border-2 ".concat(j?r?"border-success-500 bg-success-500":s?"border-danger-500 bg-danger-500":"border-gray-300":s?"border-primary-500 bg-primary-500":"border-gray-300"),children:(s||j&&r)&&(0,t.jsx)("svg",{className:"w-3 h-3 text-white m-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),(0,t.jsx)("span",{className:j&&r?"font-semibold":"",children:e.answer})]})},e.answerNumber)})}),j&&D&&(0,t.jsxs)("div",{className:"p-4 rounded-lg mb-6 ".concat(D.isCorrect?"bg-success-50 border border-success-200":"bg-danger-50 border border-danger-200"),children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[D.isCorrect?(0,t.jsx)("svg",{className:"w-6 h-6 text-success-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}):(0,t.jsx)("svg",{className:"w-6 h-6 text-danger-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),(0,t.jsx)("span",{className:"font-semibold ".concat(D.isCorrect?"text-success-800":"text-danger-800"),children:D.isCorrect?"Correct!":"Incorrect"})]}),!D.isCorrect&&(0,t.jsxs)("div",{className:"text-danger-700 mb-2",children:[(0,t.jsxs)("p",{className:"font-medium",children:["The correct answer",D.correctAnswers.length>1?"s are":" is",":"]}),(0,t.jsx)("ul",{className:"list-disc list-inside ml-4",children:D.correctAnswers.map(e=>(0,t.jsx)("li",{children:(0,t.jsx)("strong",{children:e.answer})},e.answerNumber))})]}),B.reference&&(0,t.jsxs)("div",{className:"text-sm text-gray-700",children:[(0,t.jsx)("strong",{children:"Explanation:"})," ",B.reference]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("button",{onClick:()=>{h>0&&(g(h-1),y(!1))},disabled:0===h,className:"bg-gray-300 text-gray-700 px-8 py-3 rounded-lg font-medium hover:bg-gray-400 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{onClick:()=>{!j&&"correct"!==p[h]&&"incorrect"!==p[h]&&(N(e=>new Set(e).add(h)),h<m.length-1&&(g(h+1),y(!1)))},disabled:!T,className:"px-8 py-3 rounded-lg font-medium transition-colors ".concat(T?"bg-warning-500 text-white hover:bg-warning-600":"bg-gray-300 text-gray-500 cursor-not-allowed"),title:T?"Mark this question for review":"Cannot mark reviewed or checked questions",children:P?"Reviewed":"Review"}),F&&(0,t.jsx)("button",{onClick:z,className:"bg-success-600 text-white px-8 py-3 rounded-lg font-medium hover:bg-success-700",children:"Finish Exam"})]}),j?_?(0,t.jsx)("button",{onClick:z,className:"bg-success-600 text-white px-8 py-3 rounded-lg font-medium hover:bg-success-700",children:"Finish Exam"}):(0,t.jsx)("button",{onClick:()=>{h<m.length-1&&(g(h+1),y(!1))},className:"bg-primary-600 text-white px-8 py-3 rounded-lg font-medium hover:bg-primary-700",children:"Next Question"}):(0,t.jsx)("button",{onClick:()=>{let e=b[h]||[];if(0===e.length){alert("Please select an answer before checking.");return}let s=m[h].answers.filter(e=>"yes"===e.isCorrect).map(e=>e.answerNumber),r=e.length===s.length&&e.every(e=>s.includes(e))&&s.every(s=>e.includes(s));v(e=>({...e,[h]:r?"correct":"incorrect"})),N(e=>{let s=new Set(e);return s.delete(h),s}),y(!0)},className:"bg-primary-600 text-white px-8 py-3 rounded-lg font-medium hover:bg-primary-700",children:"Check"})]})]})]})})}},5591:function(e,s,r){"use strict";function t(e){let s=e.startsWith("/")?e.slice(1):e;return"/life-in-uk/".concat(s)}r.d(s,{V:function(){return t}})},1396:function(e,s,r){e.exports=r(5250)}},function(e){e.O(0,[250,325,971,938,744],function(){return e(e.s=2914)}),_N_E=e.O()}]);