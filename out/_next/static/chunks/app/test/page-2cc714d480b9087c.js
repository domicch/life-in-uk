(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[928],{2008:function(e,s,r){Promise.resolve().then(r.bind(r,2600))},2600:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return d}});var t=r(7437),n=r(2265),a=r(4033),l=r(1812),i=r.n(l),c=r(5591);function d(){let e=(0,a.useRouter)(),[s,r]=(0,n.useState)([]),[l,d]=(0,n.useState)(0),[o,u]=(0,n.useState)({}),[m,h]=(0,n.useState)({}),[x,g]=(0,n.useState)(new Set),[b,p]=(0,n.useState)(!1),[f,w]=(0,n.useState)(2700),[v,N]=(0,n.useState)(!0),[j,y]=(0,n.useState)(null);(0,n.useEffect)(()=>{(async()=>{try{let[e,s]=await Promise.all([fetch((0,c.V)("questions.csv")),fetch((0,c.V)("answers.csv"))]);if(!e.ok||!s.ok)throw Error("Failed to load test data");let t=await e.text(),n=await s.text(),a=i().parse(t,{header:!0,skipEmptyLines:!0}).data,l=i().parse(n,{header:!0,skipEmptyLines:!0}).data,d=new Map;a.forEach(e=>{let s="".concat(e.examNumber,"-").concat(e.questionNumber);d.set(s,{...e,answers:[],isMultipleChoice:!1})}),l.forEach(e=>{let s="".concat(e.examNumber,"-").concat(e.questionNumber),r=d.get(s);r&&r.answers.push(e)}),d.forEach(e=>{let s=e.answers.filter(e=>"yes"===e.isCorrect);e.isMultipleChoice=s.length>1});let o=Array.from(d.values()).sort(()=>Math.random()-.5).slice(0,24);o.forEach(e=>{e.answers.sort(()=>Math.random()-.5)}),r(o),N(!1)}catch(e){y(e instanceof Error?e.message:"Failed to load test data"),N(!1)}})()},[]),(0,n.useEffect)(()=>{if(f>0){let e=setTimeout(()=>w(f-1),1e3);return()=>clearTimeout(e)}},[f]);let C=e=>{b||(s[l].isMultipleChoice?u(s=>{let r=s[l]||[];return r.includes(e)?{...s,[l]:r.filter(s=>s!==e)}:{...s,[l]:[...r,e]}}):u(s=>({...s,[l]:[e]})))},k=e=>{d(e),p(!1)},R=e=>{if(e===l)return"current";let s=m[e];return"correct"===s?"correct":"incorrect"===s?"incorrect":x.has(e)?"review":o[e]&&o[e].length>0?"answered":"unanswered"},S=()=>{let r=s.map((e,s)=>{let r=o[s]||[],t=e.answers.filter(e=>"yes"===e.isCorrect),n=t.map(e=>e.answerNumber),a=r.length===n.length&&r.every(e=>n.includes(e))&&n.every(e=>r.includes(e)),l=r.map(s=>{var r;return(null===(r=e.answers.find(e=>e.answerNumber===s))||void 0===r?void 0:r.answer)||""}).filter(e=>e),i=t.map(e=>e.answer);return{questionIndex:s,examNumber:e.examNumber,questionNumber:e.questionNumber,question:e.question,reference:e.reference,selectedAnswers:r,correctAnswers:n,isCorrect:a,userAnswerTexts:l,correctAnswerTexts:i}}),t=Date.now().toString();sessionStorage.setItem("test-results-".concat(t),JSON.stringify(r)),e.push("/results?id=".concat(t,"&mode=test"))};if(v)return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-xl text-gray-600",children:"Loading test questions..."})]})});if(j)return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("p",{className:"text-xl text-red-600 mb-4",children:["Error: ",j]}),(0,t.jsx)("button",{onClick:()=>window.location.reload(),className:"bg-primary-600 text-white px-6 py-3 rounded-lg hover:bg-primary-700",children:"Retry"})]})});let M=s[l],q=b?(()=>{let e=s[l],r=o[l]||[],t=e.answers.filter(e=>"yes"===e.isCorrect),n=t.map(e=>e.answerNumber);return{isCorrect:r.length===n.length&&r.every(e=>n.includes(e))&&n.every(e=>r.includes(e)),correctAnswers:t,selectedAnswerNumbers:r}})():null,E=o[l]||[],L=x.has(l),z=!b&&"correct"!==m[l]&&"incorrect"!==m[l],A=l===s.length-1,T=s.every((e,s)=>"correct"===m[s]||"incorrect"===m[s]||o[s]&&o[s].length>0);return(0,t.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,t.jsxs)("div",{className:"container mx-auto px-4 py-6",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Life in the UK Test"}),(0,t.jsxs)("div",{className:"timer",children:["Time limit: ","".concat(Math.floor(f/60),":").concat((f%60).toString().padStart(2,"0"))]})]}),(0,t.jsx)("div",{className:"question-grid mb-4",children:s.map((e,s)=>(0,t.jsx)("button",{onClick:()=>k(s),className:"question-button ".concat(R(s)),children:s+1},s))}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-4 h-4 bg-success-500 rounded"}),(0,t.jsx)("span",{children:"Correct"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-4 h-4 bg-warning-500 rounded"}),(0,t.jsx)("span",{children:"Review"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-4 h-4 bg-danger-500 rounded"}),(0,t.jsx)("span",{children:"Incorrect"})]})]}),T&&(0,t.jsx)("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 text-blue-800",children:[(0,t.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),(0,t.jsx)("span",{className:"font-medium",children:"All questions answered! You can now finish the test."})]})})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,t.jsxs)("div",{className:"progress-indicator",children:["Question ",l+1," of ",s.length,L&&(0,t.jsx)("span",{className:"ml-2 px-2 py-1 bg-warning-100 text-warning-800 text-sm rounded",children:"\uD83D\uDCCB Marked for Review"})]}),(0,t.jsx)("button",{className:"bg-primary-600 text-white p-3 rounded-full hover:bg-primary-700",children:(0,t.jsxs)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:[(0,t.jsx)("path",{fillRule:"evenodd",d:"M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.617.776l-4.5-3.5a1 1 0 010-1.552l4.5-3.5z",clipRule:"evenodd"}),(0,t.jsx)("path",{fillRule:"evenodd",d:"M14.383 3.076A1 1 0 0115 4v12a1 1 0 01-1.617.776l-4.5-3.5a1 1 0 010-1.552l4.5-3.5z",clipRule:"evenodd"})]})})]}),(0,t.jsx)("h2",{className:"text-xl font-medium text-gray-900 mb-2",children:null==M?void 0:M.question}),(null==M?void 0:M.isMultipleChoice)&&(0,t.jsx)("p",{className:"text-sm text-blue-600 font-medium mb-4",children:"\uD83D\uDCCB Select TWO answers for this question"}),(0,t.jsx)("div",{className:"space-y-3 mb-8",children:null==M?void 0:M.answers.map(e=>{let s=E.includes(e.answerNumber),r="yes"===e.isCorrect,n="answer-option";return b?r?n+=" border-success-500 bg-success-50":s&&(n+=" border-danger-500 bg-danger-50"):s&&(n+=" selected"),(0,t.jsx)("button",{onClick:()=>C(e.answerNumber),className:n,disabled:b,children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-5 h-5 rounded border-2 ".concat(b?r?"border-success-500 bg-success-500":s?"border-danger-500 bg-danger-500":"border-gray-300":s?"border-primary-500 bg-primary-500":"border-gray-300"),children:(s||b&&r)&&(0,t.jsx)("svg",{className:"w-3 h-3 text-white m-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),(0,t.jsx)("span",{className:b&&r?"font-semibold":"",children:e.answer})]})},e.answerNumber)})}),b&&q&&(0,t.jsxs)("div",{className:"p-4 rounded-lg mb-6 ".concat(q.isCorrect?"bg-success-50 border border-success-200":"bg-danger-50 border border-danger-200"),children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[q.isCorrect?(0,t.jsx)("svg",{className:"w-6 h-6 text-success-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}):(0,t.jsx)("svg",{className:"w-6 h-6 text-danger-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),(0,t.jsx)("span",{className:"font-semibold ".concat(q.isCorrect?"text-success-800":"text-danger-800"),children:q.isCorrect?"Correct!":"Incorrect"})]}),!q.isCorrect&&(0,t.jsxs)("div",{className:"text-danger-700 mb-2",children:[(0,t.jsxs)("p",{className:"font-medium",children:["The correct answer",q.correctAnswers.length>1?"s are":" is",":"]}),(0,t.jsx)("ul",{className:"list-disc list-inside ml-4",children:q.correctAnswers.map(e=>(0,t.jsx)("li",{children:(0,t.jsx)("strong",{children:e.answer})},e.answerNumber))})]}),M.reference&&(0,t.jsxs)("div",{className:"text-sm text-gray-700",children:[(0,t.jsx)("strong",{children:"Explanation:"})," ",M.reference]})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("button",{onClick:()=>{l>0&&(d(l-1),p(!1))},disabled:0===l,className:"bg-gray-300 text-gray-700 px-8 py-3 rounded-lg font-medium hover:bg-gray-400 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,t.jsx)("button",{onClick:()=>{!b&&"correct"!==m[l]&&"incorrect"!==m[l]&&(g(e=>new Set(e).add(l)),l<s.length-1&&(d(l+1),p(!1)))},disabled:!z,className:"px-8 py-3 rounded-lg font-medium transition-colors ".concat(z?"bg-warning-500 text-white hover:bg-warning-600":"bg-gray-300 text-gray-500 cursor-not-allowed"),title:z?"Mark this question for review":"Cannot mark reviewed or checked questions",children:L?"Reviewed":"Review"}),b?A?(0,t.jsx)("button",{onClick:S,className:"bg-success-600 text-white px-8 py-3 rounded-lg font-medium hover:bg-success-700",children:"Finish Test"}):(0,t.jsx)("button",{onClick:()=>{l<s.length-1&&(d(l+1),p(!1))},className:"bg-primary-600 text-white px-8 py-3 rounded-lg font-medium hover:bg-primary-700",children:"Next Question"}):A&&T?(0,t.jsx)("button",{onClick:S,className:"bg-success-600 text-white px-8 py-3 rounded-lg font-medium hover:bg-success-700",children:"Finish Test"}):(0,t.jsx)("button",{onClick:()=>{let e=o[l]||[];if(0===e.length){alert("Please select an answer before checking.");return}let r=s[l].answers.filter(e=>"yes"===e.isCorrect).map(e=>e.answerNumber),t=e.length===r.length&&e.every(e=>r.includes(e))&&r.every(s=>e.includes(s));h(e=>({...e,[l]:t?"correct":"incorrect"})),g(e=>{let s=new Set(e);return s.delete(l),s}),p(!0)},className:"bg-primary-600 text-white px-8 py-3 rounded-lg font-medium hover:bg-primary-700",children:"Check"})]})]})]})})}},5591:function(e,s,r){"use strict";function t(e){let s=e.startsWith("/")?e.slice(1):e;return"/life-in-uk/".concat(s)}r.d(s,{V:function(){return t}})}},function(e){e.O(0,[325,971,938,744],function(){return e(e.s=2008)}),_N_E=e.O()}]);